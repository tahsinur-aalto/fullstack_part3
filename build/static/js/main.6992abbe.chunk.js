(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),r=t.n(o),a=t(15),u=t.n(a),s=(t(21),t(6)),i=t(3),d=function(e){var n=e.addPerson,t=e.newName,o=e.newNumber,r=e.handlePersonChange,a=e.handleNumberChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:r})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:o,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.persons,t=e.searchField,o=e.removePerson;return n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(c.jsxs)("div",{children:[e.name," ",e.number,Object(c.jsx)("button",{onClick:function(){return o(e.id,e.name)},children:"delete"})]},e.id)}))},h=function(e){var n=e.searchField,t=e.handleChange;return Object(c.jsx)("form",{children:Object(c.jsxs)("div",{children:["filter: ",Object(c.jsx)("input",{value:n,onChange:t})]})})},j=function(e){var n=e.message,t=e.type;return console.log("Notif"+n),console.log("Notif"+t),null===n?null:"success"===t?Object(c.jsx)("div",{className:"success",children:n}):"error"===t?Object(c.jsx)("div",{className:"error",children:n}):null},b=t(4),f=t.n(b),m="http://localhost:3001/persons",O={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}},v=function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),u=Object(i.a)(a,2),b=u[0],f=u[1],m=Object(o.useState)(""),v=Object(i.a)(m,2),p=v[0],g=v[1],x=Object(o.useState)(""),w=Object(i.a)(x,2),C=w[0],N=w[1],k=Object(o.useState)(null),S=Object(i.a)(k,2),F=S[0],P=S[1],y=Object(o.useState)(null),A=Object(i.a)(y,2),D=A[0],E=A[1];Object(o.useEffect)((function(){console.log("effect"),O.getAll().then((function(e){r(e)})).catch((function(e){console.log("Failed to extract data due to network error")}))}),[]);var I=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(console.log(n),"success"===n)P(e);else if("error"===n){var c=t.response.data?"".concat(e," due to error: ").concat(t.response.data.error):e;console.log(c),P(e)}E(n),setTimeout((function(){P(null),E(null)}),4e3)},J=function(e,n){var c=t[n];window.confirm("".concat(e.name," is already added to the phonebook, replace the old number with a new one?")),O.update(c.id,e).then((function(n){I("Updated ".concat(c.name),"success"),r(t.map((function(t){return t.id===c.id?Object(s.a)(Object(s.a)({},e),{},{id:n.id}):t})))})).catch((function(e){I("Information of ".concat(c.name," has already been removed from server"),"error",e)}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(j,{message:F,type:D}),Object(c.jsx)(h,{searchField:C,handleChange:function(e){N(e.target.value)}}),Object(c.jsx)("h3",{children:"add a new"}),Object(c.jsx)(d,{addPerson:function(e){e.preventDefault();var n={name:b,number:p,id:t.length+1},c=t.map((function(e){return e.name})).indexOf(b);console.log(c),c>-1?J(n,c):O.create(n).then((function(e){I("Added ".concat(b),"success"),r(t.concat(e))})).catch((function(e){I("Failed to add ".concat(b),"error",e)})),f(""),g("")},newName:b,newNumber:p,handlePersonChange:function(e){f(e.target.value)},handleNumberChange:function(e){g(e.target.value)}}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(l,{persons:t,searchField:C,removePerson:function(e,n){window.confirm("Delete ".concat(n,"?"))&&O.remove(e).then((function(){I("Deleted ".concat(n),"success"),r(t.filter((function(n){return n.id!==e})))})).catch((function(e){I("Failed to delete ".concat(n,"."),"error",e)}))}})]})};u.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.6992abbe.chunk.js.map